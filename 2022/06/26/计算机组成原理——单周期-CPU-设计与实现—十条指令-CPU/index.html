<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机组成原理——单周期 CPU 设计与实现—十条指令 CPU | Cassie's Blog</title><meta name="author" content="冬贰"><meta name="copyright" content="冬贰"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="🍐设计要求通过设计并实现支持 10 条指令的 CPU，进一步理解和掌握 CPU 设计的基本原理和过程。 🍐方案设计设计和实现一个支持如下十条指令的单周期 CPU。  非访存指令   清除累加器指令 CLA 累加器取反指令 COM 算术右移一位指令 SHR：将累加器 ACC 中的数右移一位，结果放回 ACC 循环左移一位指令 CSL：对累加器中的数据进行操作 停机指令 STP   访存指令">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机组成原理——单周期 CPU 设计与实现—十条指令 CPU">
<meta property="og:url" content="http://blog.cassie.ink/2022/06/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E5%8D%95%E5%91%A8%E6%9C%9F-CPU-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E2%80%94%E5%8D%81%E6%9D%A1%E6%8C%87%E4%BB%A4-CPU/index.html">
<meta property="og:site_name" content="Cassie&#39;s Blog">
<meta property="og:description" content="🍐设计要求通过设计并实现支持 10 条指令的 CPU，进一步理解和掌握 CPU 设计的基本原理和过程。 🍐方案设计设计和实现一个支持如下十条指令的单周期 CPU。  非访存指令   清除累加器指令 CLA 累加器取反指令 COM 算术右移一位指令 SHR：将累加器 ACC 中的数右移一位，结果放回 ACC 循环左移一位指令 CSL：对累加器中的数据进行操作 停机指令 STP   访存指令">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://blog.cassie.ink/img/back8.jpg">
<meta property="article:published_time" content="2022-06-26T04:52:20.000Z">
<meta property="article:modified_time" content="2023-07-22T08:12:07.035Z">
<meta property="article:author" content="冬贰">
<meta property="article:tag" content="课程作业">
<meta property="article:tag" content="Veliog">
<meta property="article:tag" content="计算机组成原理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.cassie.ink/img/back8.jpg"><link rel="shortcut icon" href="/img/web.png"><link rel="canonical" href="http://blog.cassie.ink/2022/06/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E5%8D%95%E5%91%A8%E6%9C%9F-CPU-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E2%80%94%E5%8D%81%E6%9D%A1%E6%8C%87%E4%BB%A4-CPU/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":"falselocal_","languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机组成原理——单周期 CPU 设计与实现—十条指令 CPU',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-07-22 16:12:07'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/webimg.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/movies/"><i class="fa-fw fa fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/back8.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Cassie's Blog"><span class="site-name">Cassie's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/movies/"><i class="fa-fw fa fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机组成原理——单周期 CPU 设计与实现—十条指令 CPU</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-26T04:52:20.000Z" title="发表于 2022-06-26 12:52:20">2022-06-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-07-22T08:12:07.035Z" title="更新于 2023-07-22 16:12:07">2023-07-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Veliog/">Veliog</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Veliog/%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A/">课程作业</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Veliog/%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机组成原理——单周期 CPU 设计与实现—十条指令 CPU"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="🍐设计要求"><a href="#🍐设计要求" class="headerlink" title="🍐设计要求"></a>🍐设计要求</h1><p>通过设计并实现支持 10 条指令的 CPU，进一步理解和掌握 CPU 设计的基本原理和过程。</p>
<h1 id="🍐方案设计"><a href="#🍐方案设计" class="headerlink" title="🍐方案设计"></a>🍐方案设计</h1><p>设计和实现一个支持如下十条指令的单周期 CPU。</p>
<ol>
<li>非访存指令</li>
</ol>
<ul>
<li>清除累加器指令 CLA</li>
<li>累加器取反指令 COM</li>
<li>算术右移一位指令 SHR：将累加器 ACC 中的数右移一位，结果放回 ACC</li>
<li>循环左移一位指令 CSL：对累加器中的数据进行操作</li>
<li>停机指令 STP</li>
</ul>
<ol start="2">
<li>访存指令</li>
</ol>
<ul>
<li>加法指令 ADD X：[X] + [ACC] –〉ACC，X 为存储器地址，直接寻址</li>
<li>存数指令 STA X，采用直接寻址方式</li>
<li>取数指令 LDA X，采用直接寻址</li>
</ul>
<ol start="3">
<li>转移类指令</li>
</ol>
<ul>
<li>无条件转移指令 JMP imm：signExt(imm) -&gt; PC</li>
<li>有条件转移（负则转）指令 BAN X：ACC 最高位为 1 则（PC）+ X -&gt; PC,否则 PC不变</li>
</ul>
<h2 id="🍑方案原理"><a href="#🍑方案原理" class="headerlink" title="🍑方案原理"></a>🍑方案原理</h2><p>单周期 CPU（Single Cycle Processor）是指一条指令在一个时钟周期内完成并开始下一条指令的执行。它是由数据通路及其控制部件两部分构成。因此，在设计该 CPU 是需要从这两方面入手：</p>
<ol>
<li>一是根据指令的功能和格式设计好数据通路并连接；</li>
<li>二是设计好控制部件。</li>
</ol>
<p>CPU 在处理指令时，一般需要经过以下几个步骤：</p>
<table>
<thead>
<tr>
<th><strong>步骤</strong></th>
<th><strong>行为</strong></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>取指令</strong> | CPU 根据 PC（程序计数器 - Program Counter）中的指令地址，在指令存储器中获取相应的指令，之后 PC的值会自动改变移动到下一条指令的地址 |<br>| <strong>指令译码</strong> | 对获取的指令进行分析，确定这个指令要完成什么操作，改变相应的控制信号 |<br>| <strong>指令执行</strong> | 相关组件获取控制信号，执行相应操作，并将结果反馈 |<br>| <strong>存储器访问</strong> | 如果指令设计读取、存储内存，则需要对存储器中相应地址进行读取或者写入 |<br>| <strong>结果写回</strong> | 将得到的数据（访问存储器或者修改其它寄存器的值获得）写回相应的寄存器 |</p>
<h2 id="🍑指令格式定义"><a href="#🍑指令格式定义" class="headerlink" title="🍑指令格式定义"></a>🍑指令格式定义</h2><p>本次实验设计的是一个 16 位的十指令单周期 CPU。</p>
<ol>
<li>非访存指令</li>
</ol>
<p>清除累加器指令 CLA­——0 —-&gt; ACC<br><img src="https://s2.loli.net/2023/05/26/WBwoi8AJSf1IMc2.png#height=30&id=ZN1qc&originHeight=59&originWidth=380&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=CLA%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=190" alt="CLA字段分配图" title="CLA字段分配图"><br>累加器取反指令 COM——~ACC→ACC<br><img src="https://s2.loli.net/2023/05/26/KYUNFdaGvzIMj5h.png#height=30&id=AKnpG&originHeight=60&originWidth=384&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=COM%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=192" alt="COM字段分配图" title="COM字段分配图"><br>算术右移一位指令 SHR：将累加器 ACC 中的数右移一位，结果放回 ACC<br><img src="https://s2.loli.net/2023/05/26/UfjGKFiNYgPaWXx.png#height=31&id=Bn5qs&originHeight=61&originWidth=391&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=SHR%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=196" alt="SHR字段分配图" title="SHR字段分配图"><br>循环左移一位指令 CSL：对累加器中的数据进行操作<br><img src="https://s2.loli.net/2023/05/26/D3ifS8MBQEpdKou.png#height=31&id=ZWqzo&originHeight=62&originWidth=393&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=CSL%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=197" alt="CSL字段分配图" title="CSL字段分配图"><br>停机指令 STP<br><img src="https://s2.loli.net/2023/05/26/NFcIhjGbRKAQJp2.png#height=31&id=aq3NF&originHeight=62&originWidth=394&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=STP%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=197" alt="STP字段分配图" title="STP字段分配图"></p>
<ol start="2">
<li>访存指令</li>
</ol>
<p>加法指令 ADD X：[X] + [ACC] –〉ACC，X 为存储器地址，直接寻址<br>M(X)→MDR(ACC)+MDR→ACC<br><img src="https://s2.loli.net/2023/05/26/JZEmdfsRtY5wFWb.png#height=31&id=kdwj9&originHeight=61&originWidth=390&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=ADD%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=195" alt="ADD字段分配图" title="ADD字段分配图"><br>存数指令 STA X，采用直接寻址方式<br>ACC→MDR MDR→M(X)<br><img src="https://s2.loli.net/2023/05/26/IWRgPz8S9lLQFpc.png#height=31&id=y5Mb2&originHeight=61&originWidth=397&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=STA%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=199" alt="STA字段分配图" title="STA字段分配图"><br>取数指令 LDA X，采用直接寻址<br>M(X)→MDR  MDR→ACC<br><img src="https://s2.loli.net/2023/05/26/dt5lfzvmKP1UQcH.png#height=30&id=uZukf&originHeight=60&originWidth=395&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=LDA%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=198" alt="LDA字段分配图" title="LDA字段分配图"></p>
<ol start="3">
<li>转移类指令</li>
</ol>
<p>无条件转移指令 JMP imm：signExt(imm) -&gt; PC<br><img src="https://s2.loli.net/2023/05/26/J4kulcr6MwnXy51.png#height=32&id=O5Esz&originHeight=63&originWidth=405&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=JMP%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=203" alt="JMP字段分配图" title="JMP字段分配图"><br>有条件转移（负则转）指令 BAN X: ACC 最高位为 1 则（PC）+ X -&gt; PC,否则 PC不变<br><img src="https://s2.loli.net/2023/05/26/V7LDlYxdIWXZBQn.png#height=31&id=udD08&originHeight=61&originWidth=401&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=BAN%E5%AD%97%E6%AE%B5%E5%88%86%E9%85%8D%E5%9B%BE&width=201" alt="BAN字段分配图" title="BAN字段分配图"></p>
<h2 id="🍑数据通路设计"><a href="#🍑数据通路设计" class="headerlink" title="🍑数据通路设计"></a>🍑数据通路设计</h2><ul>
<li><strong>非访存指令</strong></li>
</ul>
<p>由上述分析可知，非访存指令的功能是对ACC中的值进行相应的操作以及变化，则可以得到大概的非访存指令数据通路图：<br><img src="https://s2.loli.net/2023/05/26/NzbXUtWm6uFVJnf.png#height=281&id=tH6Wc&originHeight=561&originWidth=1369&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=%E9%9D%9E%E8%AE%BF%E5%AD%98%E6%8C%87%E4%BB%A4%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E5%9B%BE&width=685" alt="非访存指令数据通路图" title="非访存指令数据通路图"></p>
<ul>
<li><strong>访存指令</strong></li>
</ul>
<p>根据上述分析可知，访存指令需要根据操作数中的地址码访问相应的存储单元。在直接寻址下，相对于非访存指令，多了一步从数据寄存器取数的过程，根据分析可以画出相对应的数据通路图：<br><img src="https://s2.loli.net/2023/05/26/cO2olnKHQPGVmIR.png#height=425&id=y9vo3&originHeight=849&originWidth=1368&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=%E8%AE%BF%E5%AD%98%E6%8C%87%E4%BB%A4%E7%9A%84%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E5%9B%BE&width=684" alt="访存指令的数据通路图" title="访存指令的数据通路图"></p>
<ul>
<li><strong>转移类指令</strong></li>
</ul>
<p>无条件转移：将操作数中的立即数赋给 pc，由 pc 作为 addr 输出<br>有条件跳转：将 ACC 中的数据传入 ALU 进行判断，再根据判断结果传入pc，再由 pc 传出。</p>
<h2 id="🍑控制单元设计"><a href="#🍑控制单元设计" class="headerlink" title="🍑控制单元设计"></a>🍑控制单元设计</h2><p><img src="https://s2.loli.net/2023/05/26/HKthNxwv5JLiS8j.png#height=246&id=CIRji&originHeight=491&originWidth=1033&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=%E5%8F%82%E8%80%83%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E8%AE%BE%E8%AE%A1%E5%9B%BE&width=517" alt="参考控制单元设计图" title="参考控制单元设计图"><br><img src="https://s2.loli.net/2023/05/26/1fmeGlH6yW5hijd.png#height=343&id=f7VmN&originHeight=685&originWidth=1436&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E8%AE%BE%E8%AE%A1%E5%9B%BE&width=718" alt="控制单元设计图" title="控制单元设计图"><br>根据上述指令功能和数据通路的设计可以得出相关的控制单元设计图，如上图所示。<br>ModelSim仿真所得的相应控制单元连线图如下所示：<br><img src="https://s2.loli.net/2023/05/26/uEGJfdmtSbjnyB9.png#height=221&id=RsL4n&originHeight=442&originWidth=1370&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=modelsim%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E8%BF%9E%E7%BA%BF%E5%9B%BE&width=685" alt="modelsim控制单元连线图" title="modelsim控制单元连线图"></p>
<h2 id="🍑控制单元设计-1"><a href="#🍑控制单元设计-1" class="headerlink" title="🍑控制单元设计"></a>🍑控制单元设计</h2><p>指令与操作码对应表如下所示：</p>
<table>
<thead>
<tr>
<th>指令</th>
<th>操作码</th>
<th>指令</th>
<th>操作码</th>
</tr>
</thead>
<tbody><tr>
<td>CAL</td>
<td>0000</td>
<td>CSL</td>
<td>0101</td>
</tr>
<tr>
<td>LDA</td>
<td>0001</td>
<td>STA</td>
<td>0110</td>
</tr>
<tr>
<td>ADD</td>
<td>0010</td>
<td>BAN</td>
<td>0111</td>
</tr>
<tr>
<td>COM</td>
<td>0011</td>
<td>JMP</td>
<td>1000</td>
</tr>
<tr>
<td>SHR</td>
<td>0100</td>
<td>STOP</td>
<td>1001</td>
</tr>
</tbody></table>
<h1 id="🍐实验步骤"><a href="#🍐实验步骤" class="headerlink" title="🍐实验步骤"></a>🍐实验步骤</h1><p>在第三部分通过对该 CPU 实现细节的分析、设计，并得到该 CPU 的原理图后，就可以依次实现各个模块，并进行仿真验证了。</p>
<h2 id="🍑CPU各模块Verilog实现"><a href="#🍑CPU各模块Verilog实现" class="headerlink" title="🍑CPU各模块Verilog实现"></a>🍑CPU各模块Verilog实现</h2><p>在前面实验中，已经分别设计和实现了 PC、指令存储器、寄存器组和 ALU，这里只给出各个模块的功能描述及其接口定义，具体实现可以直接使用或者调整前面试验的实现代码。</p>
<ul>
<li><strong>PC模块</strong></li>
</ul>
<p>PC模块功能描述如下所示：</p>
<p>| <strong>输入</strong> | 时钟信号 clk，复位信号 rst<br>有条件转移信号 wr，无条件转移信号</p>
<p>wr_none,停机信号 stop，输入 data_in |<br>| — | — |<br>| <strong>输出</strong> | 12 位指令地址 data_out |<br>| <strong>功能</strong> | 遇到复位指令清零，遇到停机指令停止，跳转指令按照设置写入，<br>其他正常情况 data_out&#x3D;data_out+1,即 pc&#x3D;pc+1 |</p>
<p>Verilog关键代码：</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_pc(</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> clk,<span class="comment">//时钟信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> rst,<span class="comment">//复位信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> wr,<span class="comment">//有条件转移信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> wr_none,<span class="comment">//无条件转移信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> stop,<span class="comment">//停机信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">reg</span>[<span class="number">11</span>:<span class="number">0</span>] data_in,<span class="comment">//输入的12位跳转所加的数</span></span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">reg</span>[<span class="number">11</span>:<span class="number">0</span>] data_out<span class="comment">//12位指令地址</span></span><br><span class="line">);</span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span> </span><br><span class="line">    data_out = <span class="number">0</span>; <span class="comment">//初始化data_out</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">always</span>@(<span class="keyword">negedge</span> clk) <span class="keyword">begin</span> <span class="comment">//下降沿</span></span><br><span class="line">    <span class="keyword">if</span>(stop == <span class="number">1</span>) <span class="comment">//停机信号生效</span></span><br><span class="line">      data_out = data_out; <span class="comment">//即pc的值不变</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (rst == <span class="number">1</span>) <span class="comment">//复位信号生效</span></span><br><span class="line">      data_out = <span class="number">0</span>; <span class="comment">//即pc的值变为0</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      data_out = data_out + <span class="number">1</span>; <span class="comment">//pc=pc+1</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span><span class="comment">//上升沿</span></span><br><span class="line">    <span class="keyword">if</span>(wr == <span class="number">1</span>) <span class="comment">//有条件跳转信号生效</span></span><br><span class="line">      data_out = data_out + data_in;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(wr_none == <span class="number">1</span>)<span class="comment">//无条件跳转信号生效</span></span><br><span class="line">      data_out = <span class="number">12&#x27;b000000000011</span>;<span class="comment">//跳转至3指令</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>指令存储器模块</strong></li>
</ul>
<p>指令存储器模块功能描述如下所示：</p>
<table>
<thead>
<tr>
<th><strong>输入</strong></th>
<th>12 位指令地址 Addr</th>
</tr>
</thead>
<tbody><tr>
<td><strong>输出</strong></td>
<td>16 位指令码 Ins</td>
</tr>
<tr>
<td><strong>功能</strong></td>
<td>设置并存放待执行的指令，然后根据地址输出指令</td>
</tr>
</tbody></table>
<p>Verilog关键代码：</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_imemory (</span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">11</span>:<span class="number">0</span>] Addr,<span class="comment">//12为指令地址</span></span><br><span class="line">    <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">15</span>:<span class="number">0</span>] Ins <span class="comment">//16位指令码</span></span><br><span class="line">);</span><br><span class="line">    <span class="keyword">reg</span> [<span class="number">15</span>:<span class="number">0</span>] RAM[<span class="number">255</span>:<span class="number">0</span>]; <span class="comment">//设置数组</span></span><br><span class="line">    <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">        RAM[<span class="number">0</span>] = <span class="number">16&#x27;h0000</span>;<span class="comment">//清除累加器指令CLA</span></span><br><span class="line">        RAM[<span class="number">1</span>] = <span class="number">16&#x27;h1002</span>;<span class="comment">//取数指令LDA,直接寻址，取出地址为2的内存单元中的数</span></span><br><span class="line">        RAM[<span class="number">2</span>] = <span class="number">16&#x27;h2003</span>;<span class="comment">//加法指令ADD,直接寻址，与地址为3的数相加放入ACC中</span></span><br><span class="line">        RAM[<span class="number">3</span>] = <span class="number">16&#x27;h3000</span>;<span class="comment">//累加器取反指令COM</span></span><br><span class="line">        RAM[<span class="number">4</span>] = <span class="number">16&#x27;h4000</span>;<span class="comment">//算数右移一位指令SHR：将累加器ACC中的数右移一位，结果放回ACC</span></span><br><span class="line">        RAM[<span class="number">5</span>] = <span class="number">16&#x27;h5000</span>;<span class="comment">//循环左移一位指令CSL：对累加器中的数据进行操作</span></span><br><span class="line">        RAM[<span class="number">6</span>] = <span class="number">16&#x27;h6004</span>;<span class="comment">//存数指令STA，直接寻址,放入地址为4的内存单元</span></span><br><span class="line">        RAM[<span class="number">7</span>] = <span class="number">16&#x27;h7001</span>;<span class="comment">//有条件转移指令BAN</span></span><br><span class="line">        RAM[<span class="number">8</span>] = <span class="number">16&#x27;h8000</span>;<span class="comment">//无条件转移指令JMP,转移至第三条指令</span></span><br><span class="line">        RAM[<span class="number">9</span>] = <span class="number">16&#x27;h9000</span>;<span class="comment">//停机指令stop</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">always</span>@* <span class="keyword">begin</span></span><br><span class="line">    Ins = RAM[Addr];</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>数据存储器模块</strong></li>
</ul>
<p>数据存储器模块功能描述如下所示：</p>
<p>| <strong>输入</strong> | 输入数据存储器写信号 wr_dmemory<br>12 位指令地址 Addr</p>
<p>16 位输入数据in_dmemory |<br>| — | — |<br>| <strong>输出</strong> | 16 位输出数据 out_dmemory |<br>| <strong>功能</strong> | 用于存放题目要求的数据，在加法等指令中使用 |</p>
<p>Verilog关键代码：</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_dmemory(</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> wr_dmemory,<span class="comment">//数据寄存器写信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> clk,<span class="comment">//时钟信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">11</span>:<span class="number">0</span>] Addr,<span class="comment">//12为指令地址</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] in_dmemory,<span class="comment">//16位输入数据</span></span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] out_dmemory<span class="comment">//16位输出数据</span></span><br><span class="line">);</span><br><span class="line">  <span class="keyword">reg</span>[<span class="number">15</span>:<span class="number">0</span>] regfile[<span class="number">12&#x27;b111111111111</span>:<span class="number">0</span>]; <span class="comment">//定义为一个数组</span></span><br><span class="line">  <span class="keyword">assign</span> out_dmemory = regfile[Addr];</span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span> </span><br><span class="line">      regfile[<span class="number">0</span>] = <span class="number">16&#x27;h0002</span>; </span><br><span class="line">      regfile[<span class="number">1</span>] = <span class="number">16&#x27;h4df8</span>;</span><br><span class="line">      regfile[<span class="number">2</span>] = <span class="number">16&#x27;h0003</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"> <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">if</span>(wr_dmemory)</span><br><span class="line">     regfile[Addr] = in_dmemory;</span><br><span class="line"> <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ALU模块</strong></li>
</ul>
<p>ALU模块功能描述如下所示：</p>
<p>| <strong>输入</strong> | 操作数 in1,in2</p>
<p>操作选择信号 alu_op |<br>| — | — |<br>| <strong>输出</strong> | 运算结果输出 Z<br>有条件跳转指令的所加大小 ban_len |<br>| <strong>功能</strong> | 根据 alu_op 对 in1，in2 进行计算，并输出 Z |</p>
<p>Verilog关键代码：</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_ALU(</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] in1,</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] in2,</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> [<span class="number">3</span>:<span class="number">0</span>] alu_op,</span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">15</span>:<span class="number">0</span>] Z,</span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">reg</span> [<span class="number">11</span>:<span class="number">0</span>] ban_len</span><br><span class="line">);</span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    Z=<span class="number">0</span>;</span><br><span class="line">    ban_len = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">always</span> @*<span class="keyword">begin</span></span><br><span class="line">      <span class="keyword">case</span>(alu_op)</span><br><span class="line">      <span class="number">4&#x27;b0000</span>:Z = <span class="number">0</span>;<span class="comment">//CLA</span></span><br><span class="line">      <span class="number">4&#x27;b0011</span>:Z = ~in1;<span class="comment">//COM</span></span><br><span class="line">      <span class="number">4&#x27;b0100</span>:Z = in1[<span class="number">15</span>] == <span class="number">1</span>?&#123;<span class="number">1&#x27;b1</span>,in1[<span class="number">15</span>:<span class="number">1</span>]&#125;:&#123;<span class="number">1&#x27;b0</span>,in1[<span class="number">15</span>]&#125;;<span class="comment">//SHR </span></span><br><span class="line">      <span class="number">4&#x27;b0101</span>:Z = &#123;in1[<span class="number">14</span>:<span class="number">0</span>],in1[<span class="number">15</span>]&#125;;<span class="comment">//CSL</span></span><br><span class="line">      <span class="number">4&#x27;b0010</span>:Z = in1+in2;<span class="comment">//ADD</span></span><br><span class="line">      <span class="number">4&#x27;b0110</span>:Z = in1;<span class="comment">//STA</span></span><br><span class="line">      <span class="number">4&#x27;b0001</span>:Z = in2;<span class="comment">//LDA</span></span><br><span class="line">      <span class="number">4&#x27;b0111</span>:<span class="keyword">begin</span> <span class="comment">//BAN</span></span><br><span class="line">        <span class="keyword">if</span>(in1[<span class="number">15</span>] == <span class="number">1</span>)</span><br><span class="line">          ban_len = <span class="number">12&#x27;b000000000010</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">          ban_len = <span class="number">12&#x27;b000000000000</span>;</span><br><span class="line">      <span class="keyword">end</span></span><br><span class="line">      <span class="number">4&#x27;b1001</span>: ; <span class="comment">//stop</span></span><br><span class="line">      <span class="keyword">endcase</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>CU控制单元模块</strong></li>
</ul>
<p>CU控制单元模块功能描述如下所示：</p>
<table>
<thead>
<tr>
<th><strong>输入</strong></th>
<th>指令操作码 opcode</th>
</tr>
</thead>
<tbody><tr>
<td><strong>输出</strong></td>
<td>wr_pc, wr_none_pc, wr_ACC, wr_dmemory, stop, cu_rst</td>
</tr>
<tr>
<td>操作选择信号alu_op</td>
<td></td>
</tr>
<tr>
<td><strong>功能</strong></td>
<td>根据每一条指令的功能，对读写信号进行控制，从而来完成指令的工作</td>
</tr>
</tbody></table>
<p>Verilog关键代码：</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_CU(</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span>[<span class="number">3</span>:<span class="number">0</span>] opcode,</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> rst,</span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">reg</span> wr_pc,wr_ACC,wr_dmemory,stop,wr_none_pc,cu_rst,</span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">reg</span>[<span class="number">3</span>:<span class="number">0</span>] alu_op</span><br><span class="line">);</span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    wr_pc = <span class="number">0</span>;</span><br><span class="line">    wr_ACC = <span class="number">0</span>;</span><br><span class="line">    wr_dmemory = <span class="number">0</span>;</span><br><span class="line">    stop = <span class="number">0</span>;</span><br><span class="line">    wr_none_pc = <span class="number">0</span>;</span><br><span class="line">    alu_op = <span class="number">4&#x27;b0000</span>;</span><br><span class="line">    cu_rst = rst;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">always</span>@* <span class="keyword">begin</span></span><br><span class="line">    <span class="comment">//0000为CLA pc=0 acc=1 mdr=0</span></span><br><span class="line">    <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0000</span>) <span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">1</span>;</span><br><span class="line">      wr_ACC = <span class="number">1</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0000</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//0001为LDA pc=0 acc=1 mdr=0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0001</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">1</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0001</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//0010为ADD pc=0 acc=1 mdr=0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0010</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">1</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0010</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//0011为COM pc=0 acc=1 mdr=0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0011</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">1</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0011</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//0100为SHR pc=0 acc=1 mdr=0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0100</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">1</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0100</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//0101为CSL pc=0 acc=0 mdr=0 </span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0101</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">1</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0101</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//0110为STA pc=0 acc=0 mdr=1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0110</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">0</span>;</span><br><span class="line">      wr_dmemory = <span class="number">1</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0110</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//0111为BAN pc=1 acc=0 mdr=0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b0111</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">1</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">1</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b0111</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//1000为JMP pc=1 acc=0 mdr=0</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b1000</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_none_pc=<span class="number">1</span>;</span><br><span class="line">      wr_ACC = <span class="number">0</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">0</span>;</span><br><span class="line">      alu_op = <span class="number">4&#x27;b1000</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">//1001为STOP pc=1 acc=0 mdr=0 stop=1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(opcode == <span class="number">4&#x27;b1001</span>)<span class="keyword">begin</span></span><br><span class="line">      wr_pc = <span class="number">0</span>;</span><br><span class="line">      cu_rst = <span class="number">0</span>;</span><br><span class="line">      wr_ACC = <span class="number">0</span>;</span><br><span class="line">      wr_dmemory = <span class="number">0</span>;</span><br><span class="line">      stop = <span class="number">1</span>;</span><br><span class="line">      <span class="comment">//alu_op = 4&#x27;b1001;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>ACC模块</strong></li>
</ul>
<p>ACC模块功能描述如下所示：</p>
<p>| <strong>输入</strong> | 时钟信号 clk</p>
<p>ACC 写信号 wr_ACC，ACC 输入 in_ACC |<br>| — | — |<br>| <strong>输出</strong> | ACC 输出 out_ACC |<br>| <strong>功能</strong> | 将非访存指令的操作数暂时存放在累加器中 |</p>
<p>Verilog关键代码：</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_ACC(</span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> clk,<span class="comment">//时钟信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span> wr_ACC,<span class="comment">//ACC写信号</span></span><br><span class="line">  <span class="keyword">input</span> <span class="keyword">wire</span>[<span class="number">15</span>:<span class="number">0</span>] in_ACC,<span class="comment">//ACC输入</span></span><br><span class="line">  <span class="keyword">output</span> <span class="keyword">wire</span>[<span class="number">15</span>:<span class="number">0</span>] out_ACC<span class="comment">//ACC输出</span></span><br><span class="line">);</span><br><span class="line">  <span class="keyword">reg</span>[<span class="number">15</span>:<span class="number">0</span>] ACC; <span class="comment">//定义数组</span></span><br><span class="line">  <span class="keyword">assign</span> out_ACC = ACC; <span class="comment">//用assign对out_ACC赋值</span></span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">    ACC = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">always</span>@(<span class="keyword">posedge</span> clk) <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">if</span>(wr_ACC)</span><br><span class="line">      ACC = in_ACC;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<h2 id="🍑CPU顶层文件封装实现"><a href="#🍑CPU顶层文件封装实现" class="headerlink" title="🍑CPU顶层文件封装实现"></a>🍑CPU顶层文件封装实现</h2><p>通过根据以上定义的模块进行连接、封装就得到了目标 CPU，该 CPU 的输入为系统时钟信号 clk 和重置信号 reset。<br>Verilog关键代码：</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_CPU(</span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">wire</span> clk,<span class="comment">//时钟信号</span></span><br><span class="line">    <span class="keyword">input</span> <span class="keyword">wire</span> rst<span class="comment">//复位信号</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">wire</span> stop,pc_wr,ACC_wr,dmemory_wr,pc_wr_none;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">3</span>:<span class="number">0</span>] alu_op;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">11</span>:<span class="number">0</span>] Addr;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">11</span>:<span class="number">0</span>] pc_in;</span><br><span class="line"><span class="keyword">wire</span> [<span class="number">15</span>:<span class="number">0</span>] opcode,in1,in2,Z;</span><br><span class="line"></span><br><span class="line">five_pc pc(</span><br><span class="line">    <span class="variable">.clk</span>(clk),</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.stop</span>(stop),</span><br><span class="line">    <span class="variable">.wr</span>(pc_wr),</span><br><span class="line">    <span class="variable">.data_in</span>(pc_in),</span><br><span class="line">    <span class="variable">.data_out</span>(Addr),</span><br><span class="line">    <span class="variable">.wr_none</span>(pc_wr_none)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">five_imemory imemory(</span><br><span class="line">    <span class="variable">.Addr</span>(Addr),</span><br><span class="line">    <span class="variable">.Ins</span>(opcode)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">five_dmemory dmemory(</span><br><span class="line">    <span class="variable">.clk</span>(clk),</span><br><span class="line">    <span class="variable">.wr_dmemory</span>(dmemory_wr),</span><br><span class="line">    <span class="variable">.Addr</span>(Addr),</span><br><span class="line">    <span class="variable">.in_dmemory</span>(Z),</span><br><span class="line">    <span class="variable">.out_dmemory</span>(in2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">five_ACC acc(</span><br><span class="line">    <span class="variable">.clk</span>(clk),</span><br><span class="line">    <span class="variable">.wr_ACC</span>(ACC_wr),</span><br><span class="line">    <span class="variable">.in_ACC</span>(Z),</span><br><span class="line">    <span class="variable">.out_ACC</span>(in1)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">five_CU cu(</span><br><span class="line">    <span class="variable">.rst</span>(rst),</span><br><span class="line">    <span class="variable">.opcode</span>(opcode[<span class="number">15</span>:<span class="number">12</span>]),</span><br><span class="line">    <span class="variable">.stop</span>(stop),</span><br><span class="line">    <span class="variable">.wr_pc</span>(pc_wr),</span><br><span class="line">    <span class="variable">.wr_ACC</span>(ACC_wr),</span><br><span class="line">    <span class="variable">.wr_dmemory</span>(dmemory_wr),</span><br><span class="line">    <span class="variable">.alu_op</span>(alu_op),</span><br><span class="line">    <span class="variable">.wr_none_pc</span>(pc_wr_none),</span><br><span class="line">    <span class="variable">.cu_rst</span>(rst)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">five_ALU alu(</span><br><span class="line">    <span class="variable">.in1</span>(in1),</span><br><span class="line">    <span class="variable">.in2</span>(in2),</span><br><span class="line">    <span class="variable">.alu_op</span>(alu_op),</span><br><span class="line">    <span class="variable">.Z</span>(Z),</span><br><span class="line">    <span class="variable">.ban_len</span>(pc_in)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure>
<h2 id="🍑CPU模拟仿真"><a href="#🍑CPU模拟仿真" class="headerlink" title="🍑CPU模拟仿真"></a>🍑CPU模拟仿真</h2><p>为了仿真验证所实现的 CPU，需要定义测试文件并在测试文件中对指令存储器和寄存器堆中的相应寄存器的值进行初始化，并通过仿真波形图查看是否指令得到了正确执行。</p>
<ul>
<li><strong>TestBench关键代码：</strong><figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">module</span> five_CPU_tb();</span><br><span class="line">  <span class="keyword">reg</span> clk,rst;</span><br><span class="line">  <span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">      clk=<span class="number">1</span>;</span><br><span class="line">      rst=<span class="number">1</span>;</span><br><span class="line">      #<span class="number">1</span> rst=<span class="number">0</span>;</span><br><span class="line">      #<span class="number">20</span> <span class="built_in">$stop</span>;</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">always</span> #<span class="number">1</span> clk=~clk;</span><br><span class="line"></span><br><span class="line">  five_CPU uut(</span><br><span class="line">      <span class="variable">.clk</span>(clk),</span><br><span class="line">      <span class="variable">.rst</span>(rst)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="🍐实验步骤-1"><a href="#🍐实验步骤-1" class="headerlink" title="🍐实验步骤"></a>🍐实验步骤</h1><ol>
<li><strong>建立 ModelSim 工程</strong></li>
</ol>
<p>打开 ModelSim，选择 File-&gt;New-&gt;Project，出现 Create Project 对话框，填写工程名（Project Name），选择保存目录（Project Location），注意保存目录中不要有中文。<br><img src="https://s2.loli.net/2023/05/26/zhlUjRsEAHtQZVW.png#height=138&id=bRXkF&originHeight=276&originWidth=605&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=303"><br>单击 OK 按钮后，现在可以选 Create New File（新建文件）或者 Add Existing File（添加已存在文件）。这里我们选择 Add Existing File，也就是添加上述所描述的 Verilog 代码。<br>点击 Browse 按钮，添加上述描述的文件。<br>选择要添加的文件后，单击“打开”按钮，即添加完成，在其中选择 copy to project directory，这样就会将 cu.v等文件复制到新的工程目录下，单击OK 按钮。<br>文件添加完成后，ModelSim 主界面会显示所有文件的状态。选中任意一个文件，右键单击，选择 Compile-&gt;Compile All，即开始编辑所有文件。没有出错，文件状态应该都是绿色的对号，否则点击屏幕下方的 Transcript，查看出错信息，直至无误。</p>
<ol start="2">
<li><strong>开始仿真</strong></li>
</ol>
<p>切换到 Library，然后展开 work 目录，在 spu_tb.v 文件上单击右键，在弹出菜单中选择 Simulate （without Optimization）。<br>此时会出现一个名为 sim 的界面，展开其中的spu_tb 节点，选择 uut，会在 Objects 窗口显示所有信号：（若没有出现 Objects 窗口，可以通过菜单 View-&gt;Objects调出该窗口）<br>选择 Objects 窗口的所有信号（Ctrl+A），然后单击右键，在弹出菜单中选择 Add to-&gt;Wave-&gt;Selected Signals。<br>单击工具栏中的 Run-All 按钮，便开始仿真，可以得到仿真效果图<br>结束后，请在 Transcript 中输入 quit –sim 命令退出。</p>
<h1 id="🍐故障与调试"><a href="#🍐故障与调试" class="headerlink" title="🍐故障与调试"></a>🍐故障与调试</h1><h2 id="🍑代码编写问题1"><a href="#🍑代码编写问题1" class="headerlink" title="🍑代码编写问题1"></a>🍑代码编写问题1</h2><p><strong>故障现象：</strong><br>由于本次实验中实验指导书给的提示很少，刚开始接触的时候虽然后实验四的基础，但还是有一点无从下手，所以网上查阅了较多的资料。<br><strong>解决方案：</strong><br>网上查阅了较多资料以及通过学习别人的代码，在实验四的基础上对实验五进行编写，不断尝试下完成本次实验代码的编写。</p>
<h2 id="🍑实验故障1"><a href="#🍑实验故障1" class="headerlink" title="🍑实验故障1"></a>🍑实验故障1</h2><p><strong>故障现象：</strong><br>只要用到include，编译就出错，爆出Cannot open &#96;include file *.v<br><strong>原因分析：</strong><br>文件调用出现错误。<br><strong>解决方案：</strong><br>将编译文件放在同一个文件夹中，并编译时要在文件区中进行。</p>
<h2 id="🍑实验故障2"><a href="#🍑实验故障2" class="headerlink" title="🍑实验故障2"></a>🍑实验故障2</h2><p><strong>故障现象：</strong><br><img src="https://s2.loli.net/2023/05/26/pXoc5mn36GAzkNy.png#height=363&id=nUMDq&originHeight=725&originWidth=929&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=465"><br><strong>原因分析：</strong><br>代码中的编码格式系统无法识别.<br><strong>解决方案：</strong><br>所以参考的代码需要手动输入，而且多半问题出在空格和换行符&#x2F;t上，可以利用文本编辑器统一替换。</p>
<h2 id="🍑实验故障3"><a href="#🍑实验故障3" class="headerlink" title="🍑实验故障3"></a>🍑实验故障3</h2><p>还出现了很多在实验四中遇到过的问题，这里不做过多赘述。</p>
<h1 id="🍐仿真及分析"><a href="#🍐仿真及分析" class="headerlink" title="🍐仿真及分析"></a>🍐仿真及分析</h1><p>整体模拟波形图如下所示：<br><img src="https://s2.loli.net/2023/05/26/8hd7jpr1gIi5yqS.png#height=353&id=KVQPb&originHeight=705&originWidth=2369&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=1185"></p>
<h2 id="🍑清除累加器CLA指令"><a href="#🍑清除累加器CLA指令" class="headerlink" title="🍑清除累加器CLA指令"></a>🍑清除累加器CLA指令</h2><p>清除累加器CLA指令波形如下所示：</p>
<p><img src="https://s2.loli.net/2023/05/26/eobWu1kCx9Q58jv.png#height=154&id=kVRYy&originHeight=308&originWidth=606&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=303"><br>分析：累加器清零指令，即 ACC 清零。in1 操作数表示着 ACC 中的值，可以发现为 0。所以清零成功。</p>
<h2 id="🍑取数指令LDA"><a href="#🍑取数指令LDA" class="headerlink" title="🍑取数指令LDA"></a>🍑取数指令LDA</h2><p>取数指令 LDA波形如下所示：<br><img src="https://s2.loli.net/2023/05/26/KqiP2CXp8n7ReLv.png#height=133&id=ZKQYx&originHeight=266&originWidth=1024&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=512"><br>分析：取数指令 LDA：取出地址为 2 的内存单元中的数。<br>该 CPU 中，设置每下降沿 pc 自动加 1，这里变为12’h001，进入取数指令。在数据存储器 dmemory 中，第二内存单元的数设置的是：16’h4df8，即 0100101111111000。又因为在该CPU 中，操作数 in2 可表示 dmemory 中输出的数，z 也输出该数，所以取数成功。</p>
<h2 id="🍑加法指令ADD"><a href="#🍑加法指令ADD" class="headerlink" title="🍑加法指令ADD"></a>🍑加法指令ADD</h2><p>加法指令ADD波形入下所示：<br><img src="https://s2.loli.net/2023/05/26/rqwvuUlxSA8a6md.png#height=324&id=ehYFs&originHeight=648&originWidth=1038&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=519"><br>分析：加法指令 ADD。直接寻址，与地址 3 的数相加存入 ACC 中。<br>因为下降沿自动加 1，Addr 至12’h002，所以进入加法指令。首先将上一条指令取出的数，暂存到 ACC 中，可以通过波形看到ACC_wr 为 1，此时 in1变成了所取出的数。Dmemory 中直接寻址到地址为 3 的数，可以通过 in2 验证。相加之后，放入 ACC 中，由于设置的是上升沿写入 ACC  所以在下一个上升沿时，in1 为做加法之后的数，为16’h4dfb。所以，加法指令成功。</p>
<h2 id="🍑累加器取反指令COM"><a href="#🍑累加器取反指令COM" class="headerlink" title="🍑累加器取反指令COM"></a>🍑累加器取反指令COM</h2><p>累加器取反指令COM波形如下所示：<br><img src="https://s2.loli.net/2023/05/26/3P5c26LnMKqrSQs.png#height=331&id=gQtzg&originHeight=662&originWidth=1040&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=520"><br>分析：累加器取反指令 COM。<br>因为下降沿自动加 1，Addr 至 12’h003，所以进入取反指令。将上一条指令加完的数放入 ACC 中，通过 in1 可以看到。然后对其进行取反操作，变为16’hb204。下一次上升沿写入 ACC，通过 in1 可以看出。所以，取反成功。</p>
<h2 id="🍑算术右移一位指令SHR"><a href="#🍑算术右移一位指令SHR" class="headerlink" title="🍑算术右移一位指令SHR"></a>🍑算术右移一位指令SHR</h2><p>算术右移一位指令SHR波形如下所示：<br><img src="https://s2.loli.net/2023/05/26/tZIQArTJBc3o8SF.png#height=333&id=uW6ze&originHeight=665&originWidth=836&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=418"><br>分析：算术右移一位指令 SHR，将累加器 ACC 中的数右移一位，结果放回 ACC。下降沿自动加 1，Addr 至12’h004，所以进入算术右移指令。In1 右移过后，再存入 ACC，此时 in1 表示的是右移过后的数。由图可以看出，in1 由16’hb204 变为16’hd902，算术右移成功。</p>
<h2 id="🍑循环左移一位指令CSL"><a href="#🍑循环左移一位指令CSL" class="headerlink" title="🍑循环左移一位指令CSL"></a>🍑循环左移一位指令CSL</h2><p>循环左移一位指令CSL波形如下所示：<br><img src="https://s2.loli.net/2023/05/26/QDU8AFVBIReEys5.png#height=337&id=Z8so1&originHeight=673&originWidth=1054&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=527"><br>分析：循环左移一位指令 CSL，对累加器中的数据进行操作。<br>下降沿自动加 1，Addr 至12’h005，所以进入算术右移指令。In1 循环左移过后，再存入 ACC，此时 in1 表示的是左移过后的数。由图可以看出，in1由16’hd902 变为16’hb205，循环左移成功成功。</p>
<h2 id="🍑存数指令STA"><a href="#🍑存数指令STA" class="headerlink" title="🍑存数指令STA"></a>🍑存数指令STA</h2><p>存数指令STA波形如下所示：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/32676326/1685101420918-dd17468f-eb3c-4118-9d37-8657105b0d60.png#averageHue=%23424140&clientId=ud353abc6-2561-4&height=329&id=bXkq2&originHeight=658&originWidth=1051&originalType=binary&ratio=1&rotation=0&showTitle=false&size=60727&status=done&style=none&taskId=u7561dbe6-83c7-4de3-a9ec-2f8c61e6edd&title=&width=526" alt="image.png"><br>分析：存数指令 STA：直接寻址，放入地址为 4 的内存单元<br>下降沿自动加 1，Addr 至12’h006，所以进入存数指令。由于本指令不需要进行写入 ACC 的操作，所以 ACC_wr 变为 0，因为要存数，所以写入数据存储器的信号 dmemory_wr 变为 1  在下一个上升沿时，写入 dmemory，此时由 in2可以看出，存入成功。</p>
<h2 id="🍑有条件跳转指令-无条件跳转指令"><a href="#🍑有条件跳转指令-无条件跳转指令" class="headerlink" title="🍑有条件跳转指令\无条件跳转指令"></a>🍑有条件跳转指令\无条件跳转指令</h2><p>有条件跳转指令\无条件跳转指令波形如下所示：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/32676326/1685101409357-13d044e3-59c5-4c48-8725-a9e520ddfb0b.png#averageHue=%233c3b3a&clientId=ud353abc6-2561-4&height=353&id=KBeHW&originHeight=705&originWidth=1469&originalType=binary&ratio=1&rotation=0&showTitle=false&size=74664&status=done&style=none&taskId=u7c7cbbad-7a7e-4e39-a5e4-6d05a78f7d7&title=&width=735" alt="image.png"><br>分析：有条件跳转指令：负则转。无条件跳转指令。<br>下降沿自动加 1，Addr 至12’h007，进入有条件跳转指令，在该 CPU中，我设置其跳转是 pc&#x3D;pc+1 是为了跳转至下一条无条件跳转指令，这样方便同时验证这两条指令的正确性。通过波形发现，此时有条件跳转信号 pc_wr 变为 1，ACC 中的数为负，所以发生跳转，在下一个上升沿时，pc+1，进入下一条指令，为无条件跳转。在本 cpu 中，我设置无条件跳转至第三条指令，取反指令，根据波形，可以得出有条件跳转和无条件跳转都能成功运行。</p>
<h2 id="🍑停机指令stop"><a href="#🍑停机指令stop" class="headerlink" title="🍑停机指令stop"></a>🍑停机指令stop</h2><p>停机指令stop波形如下所示：<br><img src="https://cdn.nlark.com/yuque/0/2023/png/32676326/1685101395234-b9e7a1e2-9a78-40e7-88c3-925ce036145b.png#averageHue=%233c3b3a&clientId=ud353abc6-2561-4&height=342&id=BBdBB&originHeight=683&originWidth=1251&originalType=binary&ratio=1&rotation=0&showTitle=false&size=64889&status=done&style=none&taskId=uce77ff7a-45ca-4e1d-b178-5d206ee9821&title=&width=626" alt="image.png"><br>分析：停机指令 stop<br>由于为了验证上述两条跳转指令，该 cpu 无法自动进入 stop 指令。我为了验证停机指令，将有条件跳转指令中的 pc+1 改成 pc+2，跳转至停机指令。<br>跳转至停机指令，由 stop 信号变为 1 以及后面不运行可以看出。</p>
<h1 id="🍐总结与心得"><a href="#🍐总结与心得" class="headerlink" title="🍐总结与心得"></a>🍐总结与心得</h1><h2 id="🍑实验总结"><a href="#🍑实验总结" class="headerlink" title="🍑实验总结"></a>🍑实验总结</h2><p>本次实验主要完成了如下几点工作：<br><strong>实验四</strong></p>
<ol>
<li>完成方案总结——实验四完成了单周期 CPU 设计与实现——单指令 CPU，实验要求为通过设计并实现支持一条指令的 CPU，基本理解和掌握了 CPU 设计的基本原理和过程，根据实验内容设计和实现了一个支持加法指令的单周期 CPU。</li>
<li>功能总结——该实验所设计的单周期CPU可以实现加法指令要求该加法指令（表示为 add r1，r2，r3）格式约定如下：采用寄存器寻址，r1，r2，r3 为寄存器编号，r1 和 r2 存放两个源操作数，r3为目标寄存器，其功能为[r1] + [r2] -&gt; r3。</li>
</ol>
<p><strong>实验五</strong></p>
<ol>
<li>完成方案总结——实验五完成了为通过设计并实现支持 10 条指令的 CPU，进一步理解和掌握了 CPU 设计的基本原理和过程，根据实验内容设计和实现一个支持如下十条指令的单周期 CPU。</li>
<li>功能总结——该实验所设计的单周期CPU可以实现非访存指令、访存指令和转移类指令共10种指令。指令如下：</li>
</ol>
<ul>
<li><strong>非访存指令</strong><ul>
<li>清除累加器指令 CLA</li>
<li>累加器取反指令 COM</li>
<li>算术右移一位指令 SHR：将累加器 ACC 中的数右移一位，结果放回 ACC</li>
<li>循环左移一位指令 CSL：对累加器中的数据进行操作</li>
<li>停机指令 STP</li>
</ul>
</li>
<li><strong>访存指令</strong><ul>
<li>加法指令 ADD X：[X] + [ACC] –〉ACC，X 为存储器地址，直接寻址</li>
<li>存数指令 STA X，采用直接寻址方式</li>
<li>取数指令 LDA X，采用直接寻址</li>
</ul>
</li>
<li><strong>转移类指令</strong><ul>
<li>无条件转移指令 JMP imm：signExt(imm) -&gt; PC</li>
<li>有条件转移（负则转）指令 BAN X: ACC 最高位为 1 则（PC）+ X -&gt; PC,否则 PC不变</li>
</ul>
</li>
</ul>
<h2 id="🍑实验心得"><a href="#🍑实验心得" class="headerlink" title="🍑实验心得"></a>🍑实验心得</h2><ol>
<li>通过实验我知道了单周期 CPU 是指所有指令均在一个时钟周期内完成的 CPU。CPU 由数据通路及其控制部件两部分构成，因而要完成一个支持若干条指令 CPU 的设计，需要依次完成以下两件事：<ol>
<li>根据指令功能和格式设计 CPU 的数据通路；</li>
<li>根据指令功能和数据通路设计控制部件。</li>
</ol>
</li>
<li>通过本次实验，我对运算器，存储器以及输入输出的个各个系统内部结构有了更为深刻的了解，同时也增加了我对于计算机组成原理的更为深层次的理解，除此以外此次实验还增加了我对于Verilog语言的理解，锻炼了我对于verilog代码编写和使用的能力，初步掌握了对modelsim的使用，锻炼了我的实验动手能力。</li>
<li>通过本次实验，我认为，设计一个 CPU 要从这几个方面考虑：<ol>
<li>首先要确定 CPU 的指令条数、功能，根据指令的类型设计指令格式。</li>
<li>然后确定该 CPU 是单周期还是多周期。</li>
<li>接着，根据指令的具体功能设计 CPU 的数据通路，并设计数据通路上的各部件及其控制部件，确定他们的输入输出和功能。</li>
<li>最后，进行整体封装，再编写测试文件进行测试。然后通过 modelsim 进行波形仿真，验真是否能够实现功能。</li>
</ol>
</li>
<li>总之，这次 cpu 的实验，让我收获颇丰。加深了对计算机组成原理知识的印象，对cpu 的结构更加熟悉，对今后知识进一步的拓展打下基础。</li>
<li>对于实验的建议，刚开始为了分享实验我是直接做的实验四，就觉得和我自己的水平相差太大了，感觉完全无从下手，后来把实验一二三都看了一遍发现实验四是对于前三个的总结，后来我就将实验一二三都根据实验报告实现了一遍，在进行实验四五的时候，就顺手了很多。总的来说，这次实验还是让我收获了很多的，在通过听取别的同学的实验分享和我分享的时候丁老师对于我的指导也让我收获很多，虽然计组实验期间挺忙的，但是还是觉得很有意义的。</li>
</ol>
<h1 id="🍐参考文献"><a href="#🍐参考文献" class="headerlink" title="🍐参考文献"></a>🍐参考文献</h1><p>[1]DAVID A.PATTERSON(美).计算机组成与设计硬件&#x2F;软件接口(原书第5版).北京:机械工业出版社.<br>[2]David Money Harris(美).数字设计和计算机体系结构（第二版）. 机械工业出版社<br>[3]谭志虎,秦磊华,胡迪青.计算机组成原理实践教程.北京:清华大学出版社，2018年.<br>[4]秦磊华，吴非，莫正坤.计算机组成原理. 北京:清华大学出版社，2011年.<br>[5]袁春风编著. 计算机组成与系统结构. 北京:清华大学出版社，2011年.<br>[6]张晨曦，王志英. 计算机系统结构. 高等教育出版社，2008年.</p>
<h1 id="🍐程序代码"><a href="#🍐程序代码" class="headerlink" title="🍐程序代码"></a>🍐程序代码</h1><p>代码已开源至Github</p>
<p><a target="_blank" rel="noopener" href="https://github.com/xiayi0409/Cassie/tree/main/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86-%E5%8D%95%E5%91%A8%E6%9C%9FCPU%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0">Cassie&#x2F;计算机组成原理-单周期CPU设计与实现 at main · xiayi0409&#x2F;Cassie (github.com)</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://blog.cassie.ink">冬贰</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://blog.cassie.ink/2022/06/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E5%8D%95%E5%91%A8%E6%9C%9F-CPU-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E2%80%94%E5%8D%81%E6%9D%A1%E6%8C%87%E4%BB%A4-CPU/">http://blog.cassie.ink/2022/06/26/计算机组成原理——单周期-CPU-设计与实现—十条指令-CPU/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://blog.cassie.ink" target="_blank">Cassie's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AF%BE%E7%A8%8B%E4%BD%9C%E4%B8%9A/">课程作业</a><a class="post-meta__tags" href="/tags/Veliog/">Veliog</a><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/">计算机组成原理</a></div><div class="post_share"><div class="social-share" data-image="/img/back8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/06/28/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E2%80%94%E2%80%94%E5%B0%86WHILE%E8%AF%AD%E5%8F%A5%E8%BD%AC%E6%8D%A2%E6%88%90%E5%9B%9B%E5%85%83%E5%BC%8F%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%AE%9E%E7%8E%B0/" title="编译原理课程设计——将WHILE语句转换成四元式的程序实现"><img class="cover" src="/img/back5.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">编译原理课程设计——将WHILE语句转换成四元式的程序实现</div></div></a></div><div class="next-post pull-right"><a href="/2022/06/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E5%8D%95%E5%91%A8%E6%9C%9F-CPU-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E2%80%94%E5%8D%95%E6%8C%87%E4%BB%A4-CPU/" title="计算机组成原理——单周期 CPU 设计与实现—单指令 CPU"><img class="cover" src="/img/back7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机组成原理——单周期 CPU 设计与实现—单指令 CPU</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/06/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E5%8D%95%E5%91%A8%E6%9C%9F-CPU-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E2%80%94%E5%8D%95%E6%8C%87%E4%BB%A4-CPU/" title="计算机组成原理——单周期 CPU 设计与实现—单指令 CPU"><img class="cover" src="/img/back7.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-20</div><div class="title">计算机组成原理——单周期 CPU 设计与实现—单指令 CPU</div></div></a></div><div><a href="/2023/05/12/%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF%E2%80%94%E2%80%94DES%E5%92%8CRSA%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E7%A8%8B%E5%BA%8F/" title="信息安全技术——DES和RSA加密解密程序"><img class="cover" src="/img/back4.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-12</div><div class="title">信息安全技术——DES和RSA加密解密程序</div></div></a></div><div><a href="/2023/07/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E7%B3%BB%E7%BB%9F%E6%80%BB%E7%BA%BF/" title="计算机组成原理——系统总线"><img class="cover" src="/img/zu2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-04</div><div class="title">计算机组成原理——系统总线</div></div></a></div><div><a href="/2023/06/27/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/" title="计算机组成原理——计算机系统概论"><img class="cover" src="/img/zu1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-27</div><div class="title">计算机组成原理——计算机系统概论</div></div></a></div><div><a href="/2023/07/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/" title="计算机组成原理——指令系统"><img class="cover" src="/img/zu6.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-20</div><div class="title">计算机组成原理——指令系统</div></div></a></div><div><a href="/2023/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94CPU%E7%9A%84%E7%BB%93%E6%9E%84%E4%B8%8E%E5%8A%9F%E8%83%BD/" title="计算机组成原理——CPU的结构与功能"><img class="cover" src="/img/zu7.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-07-22</div><div class="title">计算机组成原理——CPU的结构与功能</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/webimg.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">冬贰</div><div class="author-info__description">嗨！欢迎来到我的世界！</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xiayi0409/Cassie"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=1725030706&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:xiayi0409@163.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">保持自由的灵魂永不困于荆棘</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E8%AE%BE%E8%AE%A1%E8%A6%81%E6%B1%82"><span class="toc-text">🍐设计要求</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E6%96%B9%E6%A1%88%E8%AE%BE%E8%AE%A1"><span class="toc-text">🍐方案设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E6%96%B9%E6%A1%88%E5%8E%9F%E7%90%86"><span class="toc-text">🍑方案原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E6%8C%87%E4%BB%A4%E6%A0%BC%E5%BC%8F%E5%AE%9A%E4%B9%89"><span class="toc-text">🍑指令格式定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E6%95%B0%E6%8D%AE%E9%80%9A%E8%B7%AF%E8%AE%BE%E8%AE%A1"><span class="toc-text">🍑数据通路设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E8%AE%BE%E8%AE%A1"><span class="toc-text">🍑控制单元设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E6%8E%A7%E5%88%B6%E5%8D%95%E5%85%83%E8%AE%BE%E8%AE%A1-1"><span class="toc-text">🍑控制单元设计</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4"><span class="toc-text">🍐实验步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91CPU%E5%90%84%E6%A8%A1%E5%9D%97Verilog%E5%AE%9E%E7%8E%B0"><span class="toc-text">🍑CPU各模块Verilog实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91CPU%E9%A1%B6%E5%B1%82%E6%96%87%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E7%8E%B0"><span class="toc-text">🍑CPU顶层文件封装实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91CPU%E6%A8%A1%E6%8B%9F%E4%BB%BF%E7%9C%9F"><span class="toc-text">🍑CPU模拟仿真</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4-1"><span class="toc-text">🍐实验步骤</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E6%95%85%E9%9A%9C%E4%B8%8E%E8%B0%83%E8%AF%95"><span class="toc-text">🍐故障与调试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E9%97%AE%E9%A2%981"><span class="toc-text">🍑代码编写问题1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%AE%9E%E9%AA%8C%E6%95%85%E9%9A%9C1"><span class="toc-text">🍑实验故障1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%AE%9E%E9%AA%8C%E6%95%85%E9%9A%9C2"><span class="toc-text">🍑实验故障2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%AE%9E%E9%AA%8C%E6%95%85%E9%9A%9C3"><span class="toc-text">🍑实验故障3</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E4%BB%BF%E7%9C%9F%E5%8F%8A%E5%88%86%E6%9E%90"><span class="toc-text">🍐仿真及分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E6%B8%85%E9%99%A4%E7%B4%AF%E5%8A%A0%E5%99%A8CLA%E6%8C%87%E4%BB%A4"><span class="toc-text">🍑清除累加器CLA指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%8F%96%E6%95%B0%E6%8C%87%E4%BB%A4LDA"><span class="toc-text">🍑取数指令LDA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%8A%A0%E6%B3%95%E6%8C%87%E4%BB%A4ADD"><span class="toc-text">🍑加法指令ADD</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E7%B4%AF%E5%8A%A0%E5%99%A8%E5%8F%96%E5%8F%8D%E6%8C%87%E4%BB%A4COM"><span class="toc-text">🍑累加器取反指令COM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E7%AE%97%E6%9C%AF%E5%8F%B3%E7%A7%BB%E4%B8%80%E4%BD%8D%E6%8C%87%E4%BB%A4SHR"><span class="toc-text">🍑算术右移一位指令SHR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%BE%AA%E7%8E%AF%E5%B7%A6%E7%A7%BB%E4%B8%80%E4%BD%8D%E6%8C%87%E4%BB%A4CSL"><span class="toc-text">🍑循环左移一位指令CSL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%AD%98%E6%95%B0%E6%8C%87%E4%BB%A4STA"><span class="toc-text">🍑存数指令STA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E6%9C%89%E6%9D%A1%E4%BB%B6%E8%B7%B3%E8%BD%AC%E6%8C%87%E4%BB%A4-%E6%97%A0%E6%9D%A1%E4%BB%B6%E8%B7%B3%E8%BD%AC%E6%8C%87%E4%BB%A4"><span class="toc-text">🍑有条件跳转指令\无条件跳转指令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%81%9C%E6%9C%BA%E6%8C%87%E4%BB%A4stop"><span class="toc-text">🍑停机指令stop</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E6%80%BB%E7%BB%93%E4%B8%8E%E5%BF%83%E5%BE%97"><span class="toc-text">🍐总结与心得</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%AE%9E%E9%AA%8C%E6%80%BB%E7%BB%93"><span class="toc-text">🍑实验总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%8D%91%E5%AE%9E%E9%AA%8C%E5%BF%83%E5%BE%97"><span class="toc-text">🍑实验心得</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-text">🍐参考文献</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8D%90%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81"><span class="toc-text">🍐程序代码</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94CPU%E7%9A%84%E7%BB%93%E6%9E%84%E4%B8%8E%E5%8A%9F%E8%83%BD/" title="计算机组成原理——CPU的结构与功能"><img src="/img/zu7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机组成原理——CPU的结构与功能"/></a><div class="content"><a class="title" href="/2023/07/22/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94CPU%E7%9A%84%E7%BB%93%E6%9E%84%E4%B8%8E%E5%8A%9F%E8%83%BD/" title="计算机组成原理——CPU的结构与功能">计算机组成原理——CPU的结构与功能</a><time datetime="2023-07-22T07:54:29.000Z" title="发表于 2023-07-22 15:54:29">2023-07-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E5%BA%94%E7%94%A8%E5%B1%82/" title="计算机网络——计算机网络体系结构"><img src="/img/wang7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机网络——计算机网络体系结构"/></a><div class="content"><a class="title" href="/2023/07/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%94%E2%80%94%E5%BA%94%E7%94%A8%E5%B1%82/" title="计算机网络——计算机网络体系结构">计算机网络——计算机网络体系结构</a><time datetime="2023-07-21T15:33:47.000Z" title="发表于 2023-07-21 23:33:47">2023-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%946%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8E%A5%E5%8F%A3/" title="操作系统——操作系统接口"><img src="/img/os6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统——操作系统接口"/></a><div class="content"><a class="title" href="/2023/07/21/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E2%80%946%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%8E%A5%E5%8F%A3/" title="操作系统——操作系统接口">操作系统——操作系统接口</a><time datetime="2023-07-21T05:53:59.000Z" title="发表于 2023-07-21 13:53:59">2023-07-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/" title="计算机组成原理——指令系统"><img src="/img/zu6.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机组成原理——指令系统"/></a><div class="content"><a class="title" href="/2023/07/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E6%8C%87%E4%BB%A4%E7%B3%BB%E7%BB%9F/" title="计算机组成原理——指令系统">计算机组成原理——指令系统</a><time datetime="2023-07-20T09:54:39.000Z" title="发表于 2023-07-20 17:54:39">2023-07-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/07/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E8%BF%90%E7%AE%97%E6%96%B9%E6%B3%95/" title="计算机组成原理——计算机的运算方法"><img src="/img/zu5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机组成原理——计算机的运算方法"/></a><div class="content"><a class="title" href="/2023/07/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9A%84%E8%BF%90%E7%AE%97%E6%96%B9%E6%B3%95/" title="计算机组成原理——计算机的运算方法">计算机组成原理——计算机的运算方法</a><time datetime="2023-07-18T09:44:55.000Z" title="发表于 2023-07-18 17:44:55">2023-07-18</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/back8.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 冬贰</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/05/14/I SIT——坐姿监测系统及可视化设计/" alt=""><img width="48" height="48" src="/img/isit.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-05-14</span><a class="blog-slider__title" href="2023/05/14/I SIT——坐姿监测系统及可视化设计/" alt="">I SIT——坐姿监测系统及可视化设计</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/05/14/I SIT——坐姿监测系统及可视化设计/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/02/26/基于MediaPipe的坐姿及疲劳检测系统/" alt=""><img width="48" height="48" src="/img/media.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-02-26</span><a class="blog-slider__title" href="2023/02/26/基于MediaPipe的坐姿及疲劳检测系统/" alt="">基于MediaPipe的坐姿及疲劳检测系统</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/02/26/基于MediaPipe的坐姿及疲劳检测系统/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/07/13/极速救援——内涝问题解决专家/" alt=""><img width="48" height="48" src="/img/back17.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-07-13</span><a class="blog-slider__title" href="2023/07/13/极速救援——内涝问题解决专家/" alt="">极速救援——内涝问题解决专家</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/07/13/极速救援——内涝问题解决专家/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/01/20/系统硬件综合设计——MIPS五级流水线/" alt=""><img width="48" height="48" src="/img/mips.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-01-20</span><a class="blog-slider__title" href="2023/01/20/系统硬件综合设计——MIPS五级流水线/" alt="">系统硬件综合设计——MIPS五级流水线</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/01/20/系统硬件综合设计——MIPS五级流水线/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2023/07/12/数据库系统课程设计——学籍管理系统/" alt=""><img width="48" height="48" src="/img/zu9.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-07-12</span><a class="blog-slider__title" href="2023/07/12/数据库系统课程设计——学籍管理系统/" alt="">数据库系统课程设计——学籍管理系统</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2023/07/12/数据库系统课程设计——学籍管理系统/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/01/05/程序设计课程设计——推箱子/" alt=""><img width="48" height="48" src="/img/push.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-01-05</span><a class="blog-slider__title" href="2021/01/05/程序设计课程设计——推箱子/" alt="">程序设计课程设计——推箱子</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2021/01/05/程序设计课程设计——推箱子/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2022/06/26/计算机组成原理——单周期-CPU-设计与实现—十条指令-CPU/" alt=""><img width="48" height="48" src="/img/back8.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-06-26</span><a class="blog-slider__title" href="2022/06/26/计算机组成原理——单周期-CPU-设计与实现—十条指令-CPU/" alt="">计算机组成原理——单周期 CPU 设计与实现—十条指令 CPU</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2022/06/26/计算机组成原理——单周期-CPU-设计与实现—十条指令-CPU/" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="2021/07/13/数据结构课程设计——双端队列/" alt=""><img width="48" height="48" src="/img/roll.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-07-13</span><a class="blog-slider__title" href="2021/07/13/数据结构课程设计——双端队列/" alt="">数据结构课程设计——应用小大根交替堆实现双端优先队列</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="2021/07/13/数据结构课程设计——双端队列/" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>